let key="#!CHNX!#",eKey="<chnx></chnx>";function HTML(e){return document.createRange().createContextualFragment(e)}export function html(e,...t){let n="",r=[...t];e.forEach((e,t)=>{n+=e,r[t]&&(n+=key)});let i=HTML(n).firstElementChild;return r.length&&([i,...i.querySelectorAll("*")].forEach(e=>{e.textContent.includes(key)&&(e.innerHTML=e.innerHTML.toString().replaceAll(key,"<chnx></chnx>"))}),[i,...i.querySelectorAll("*")].forEach(function e(t){if(t.hasAttributes()){for(let n of t.attributes)if(t.getAttribute(n.name)==key){let i=r.shift();n.name.startsWith("on")?"function"==typeof i&&(t.addEventListener(n.name.slice(2),i),t.removeAttribute(n.name)):t.setAttribute(n.name,i)}}if("CHNX"===t.tagName){let a=r.shift();if("function"==typeof a){(a=a())instanceof Node&&t.replaceWith(a);return}if(a instanceof Node){t.replaceWith(a);return}if("object"!=typeof a){t.replaceWith(document.createTextNode(a));return}}})),i}