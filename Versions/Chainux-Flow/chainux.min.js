const{html:t,components:e,onConnect:n,onRemove:i,Render:o,Data:r,IStore:l}=(()=>{let t="#!CHNX!#",e=b();HTMLElement.prototype.clear=function(){return this.textContent="",this},HTMLElement.prototype.hide=function(t){return this.style.display=t?"none":this.style.display,this},HTMLElement.prototype.show=function(t){return this.style.display=t?"block":this.style.display,this},Object.defineProperty(HTMLElement.prototype,"text",{set:function(t){this.textContent=t},get:function(){return this.textContent}}),HTMLElement.prototype.addClass=function(t){return this.classList.add(t),this},HTMLElement.prototype.removeClass=function(t){return this.classList.remove(t),this},HTMLElement.prototype.toggleClass=function(t){return this.classList.toggle(t),this},HTMLElement.prototype.setStyle=function(t){for(let e in t){let n=t[e];"function"==typeof n&&(n=n.call(this)),this.style[e]!=n&&(this.style[e]=n)}return this},HTMLElement.prototype.set=function(t,e){for(let n in t.style&&("object"==typeof t.style&&"function"!=typeof t.style?this.setStyle(t.style):this.style="function"==typeof t.style?t.style.call(this):t.style),t)if("callback"!=n&&"style"!=n){if(n.startsWith("on")){this[n]=t[n].bind(this);continue}let i=t[n];if("function"==typeof i){let o=i.call(this,e);this[n]!==o&&(this[n]=o)}else n in this?this[n]!==i&&(this[n]=i):this.getAttribute(n)!==i&&this.setAttribute(n,i)}return t.callback&&("function"==typeof t.callback?t.callback.call(this):console.warn("Set Callback Must Be a Function!")),this};let n=0;function i(t,e){let i=e,r=n++;return l||s(),new Proxy(t,{get:(t,e)=>t[e],set(t,e,n){let l=t[e];if(t[e]!=n){t[e]=n;let s={before:l,current:n,key:e,id:r};o.mountedISElements.forEach((t,e)=>{e.set(t,s)}),i&&i.call(s)}return 1}})}let o={temp:{},elementHooksPair:new WeakMap,elementDataPair:new WeakMap,elementISPair:new WeakMap,mountedISElements:new Map,eMSG:"Component onConnect & onRemove hooks must be a function!"};function r(t){return o.temp.data=t}r.hasData=function(t){return o.elementDataPair.has(t)},r.getData=function(t){if(r.hasData(t))return o.elementDataPair.get(t)};let l;function s(){(l=new MutationObserver(t=>{t.forEach(t=>{"childList"==t.type&&(t.addedNodes.forEach(t=>{t instanceof HTMLElement&&[t,...t.querySelectorAll("*")].forEach(t=>{if(o.elementISPair.has(t)){let e=o.elementISPair.get(t);o.mountedISElements.set(t,e),t.set(e)}c("connect",t)})}),t.removedNodes.forEach(t=>{t instanceof HTMLElement&&[t,...t.querySelectorAll("*")].forEach(t=>{o.mountedISElements.has(t)&&o.mountedISElements.delete(t),c("remove",t)})}))})})).observe(document.body,{childList:!0,subtree:!0})}function a(t,e){"function"==typeof e?o.temp[t]=e:console.warn(o.eMSG),l||s()}function c(t,e){let n=o.elementHooksPair;n.has(e)&&n.get(e)[t]&&n.get(e)[t].call(e,e)}let u=t=>{a("connect",t)},f=t=>{a("remove",t)},h=()=>{o.temp.connect=null,o.temp.remove=null,o.temp.data=null};function m(t,e){h();let n=t.call(e),{remove:i,connect:r,data:l}=o.temp;return(r||i)&&o.elementHooksPair.set(n,{remove:i,connect:r}),l&&o.elementDataPair.set(n,l),h(),n}function p(t){return document.createRange().createContextualFragment(t)}function d(e){let n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),i;for(;i=n.nextNode();)i.textContent.includes(t)&&g(i)}function y(t){let e=t,n=e.split("/>").length-1,i=0;for(;n>i;){let o=e.search("/>")-1,r=0,l="";for(;o-r>=-1;){if("<"==e.charAt(o-r)){let s=(l=l.split("").reverse().join("")).split(" ")[0],a=`<${s} ${l.replace(s,"")||""}></${s}>`;e=e.slice(0,o-r)+a+e.slice(o+3,e.length),i++,o="",r=0,l=""}else l+=e.charAt(o-r);r++}}return e}function g(e){let n=document.createRange(),i=e.textContent,o=0;for(;i.includes(t);){let r=i.indexOf(t,o),l=r+t.length;n.setStart(e,r),n.setEnd(e,l),n.deleteContents();let s=document.createElement("chnx");n.insertNode(s),i=e.textContent,o=r+13}}function b(){let t=new Map;return{get(e){if(t.has(e))return t.get(e);console.warn("Component<"+e+"> is not defined!")},set(e,n){if("string"!=typeof e){console.error("Key must be a string.");return}if("function"!=typeof n){console.error("Value must be a component-function.");return}if(e.includes(" ")){console.error("Component names should not contain spaces.");return}t.set(e.toLowerCase(),n)},map:t}}function C(t){let e={},n=new DocumentFragment;return t.querySelectorAll("[slot]").forEach(t=>{e[t.getAttribute("slot")]=t,t.removeAttribute("slot"),t.remove()}),Array.from(t.childNodes).forEach(t=>{n.appendChild(t)}),{slot:n,slots:e}}function v(t){let n=document.createElement("div");t.replaceWith(n);let i=m(e.get(t.tagName.toLowerCase()),this);if(i instanceof HTMLElement){let o=i.querySelector("slot:not([name])"),r=i.querySelectorAll("slot[name]");o&&o.replaceWith(this.slot),r.length&&r.forEach(t=>{let e=t.getAttribute("name");this.slots[e]&&t.replaceWith(this.slots[e])}),n.replaceWith(i)}else console.error("Component-Function output must be a element!");return i}function A(n,...i){let r,l=o.temp.data,s=[...i];n.forEach((e,n)=>{r+=e,s.length!==n&&(r+=t)}),(r=r.replaceAll("<>","<div>").replaceAll("</>","</div>")).includes("/>")&&(r=y(r));let a=p(r).firstElementChild,c=[],u=!1,f=()=>[a,...a.querySelectorAll("*")];return f().forEach((e,n)=>{e.textContent.includes(t)&&d(e)}),f().forEach(function n(i,r){if(e.map.has(i.tagName.toLowerCase())){let f={};if(0==r&&(u=!0),i.hasAttributes())for(let h of i.attributes)if(i.getAttribute(h.name)==t){let m=s.shift();f[h.name]=m}else f[h.name]=h.value;c.push({target:i,values:f});return}if(s.length){if(i.hasAttributes()){let p=!1,d={};for(let y of Array.from(i.attributes))if(i.getAttribute(y.name)==t){let g=s.shift();if(void 0===g){i.removeAttribute(y.name);continue}if("use"==y.name){i.removeAttribute("use"),g.call(i,{parent:a,data:l});continue}if(y.name.startsWith(":")){"function"==typeof g?(p=!0,d[y.name.slice(1)]=g.bind(i)):i.set({[y.name.slice(1)]:g}),i.removeAttribute(y.name);continue}if("set"==y.name){i.set(g),i.removeAttribute("set");continue}if(y.name.startsWith("on")){"function"==typeof g&&i.addEventListener(y.name.slice(2),()=>g.call(i,{parent:a,data:l})),i.removeAttribute(y.name);continue}if("function"==typeof g){i.setAttribute(y.name,g.call(this));continue}i.setAttribute(y.name,g)}p&&o.elementISPair.set(i,d)}if("CHNX"===i.tagName){let b=s.shift();if(void 0==b){i.remove();return}if(!(b instanceof Object)){i.replaceWith(document.createTextNode(b));return}if("function"==typeof b){(b=b.call({parent:a,data:l}))instanceof Node&&i.replaceWith(b),b instanceof Object||i.replaceWith(new Text(b));return}if(b instanceof Node){i.replaceWith(b);return}}}}),c.forEach(t=>{let e=v.call({props:t.values,...C(t.target),parent:a,data:l},t.target);u&&(a=e)}),a}return A.plain=function(t){return p(t)},HTMLElement.prototype.inner=function(t){this.clear(),this.appendChild(t)},{html:A,components:e,onConnect:u,onRemove:f,Render:m,Data:r,IStore:i}})();